# Pausiva Core

Sistema de acompaÃ±amiento diario por WhatsApp para mujeres en etapa de menopausia y peri-menopausia (40-60 aÃ±os).

---

## El Problema

La menopausia es una etapa natural en la vida de toda mujer, pero frecuentemente viene acompaÃ±ada de:

- **SÃ­ntomas fÃ­sicos** como bochornos, sudoraciÃ³n nocturna, fatiga, dolores de cabeza y cambios en el sueÃ±o
- **Cambios emocionales** incluyendo ansiedad, irritabilidad, cambios de Ã¡nimo y dificultad para concentrarse
- **Falta de informaciÃ³n** sobre quÃ© es normal y cuÃ¡ndo buscar ayuda mÃ©dica
- **Aislamiento** al no tener con quiÃ©n hablar sobre estos cambios
- **Olvidos de medicaciÃ³n** y citas mÃ©dicas importantes
- **Dificultad para hacer seguimiento** de sÃ­ntomas para compartir con su mÃ©dico

Muchas mujeres enfrentan esta etapa sin el acompaÃ±amiento adecuado, sintiÃ©ndose solas o minimizando sÃ­ntomas que podrÃ­an requerir atenciÃ³n.

---

## La SoluciÃ³n: Pausiva

Pausiva es una **compaÃ±era virtual** que acompaÃ±a a las mujeres dÃ­a a dÃ­a durante esta etapa de transiciÃ³n. A travÃ©s de WhatsApp, ofrece:

### AcompaÃ±amiento Diario
- Check-ins matutinos preguntando cÃ³mo se sienten
- Conversaciones empÃ¡ticas que validan sus experiencias
- Recordatorios amigables de autocuidado

### Seguimiento Inteligente de SÃ­ntomas
- Registro automÃ¡tico de sÃ­ntomas mencionados en conversaciÃ³n
- ClasificaciÃ³n de riesgo para detectar situaciones que requieren atenciÃ³n urgente
- Historial que pueden compartir con su mÃ©dico

### GestiÃ³n de MedicaciÃ³n
- Recordatorios de medicamentos basados en sus recetas
- Seguimiento de adherencia al tratamiento
- Sin modificar ni sugerir cambios en la medicaciÃ³n

### Recordatorios de Citas
- Alertas de citas mÃ©dicas prÃ³ximas
- Ayuda para preparar preguntas para su doctor
- Seguimiento post-consulta

### Alertas de Riesgo
- DetecciÃ³n automÃ¡tica de sÃ­ntomas graves
- RecomendaciÃ³n inmediata de buscar atenciÃ³n de urgencia cuando corresponde
- NÃºmeros de emergencia disponibles

---

## FilosofÃ­a del Producto

### Lo que Pausiva SÃ hace
- Escucha y valida las experiencias de cada mujer
- Registra sÃ­ntomas y genera un historial Ãºtil
- EnvÃ­a recordatorios de medicaciÃ³n y citas
- Detecta situaciones de riesgo y alerta cuando es necesario
- Sugiere consultar a profesionales de salud
- Ofrece informaciÃ³n general sobre autocuidado

### Lo que Pausiva NO hace
- **NO diagnostica** condiciones mÃ©dicas
- **NO prescribe** ni sugiere medicamentos
- **NO reemplaza** la atenciÃ³n mÃ©dica profesional
- **NO modifica** esquemas de medicaciÃ³n
- **NO da consejos mÃ©dicos** especÃ­ficos

### Tono de comunicaciÃ³n
- **EmpÃ¡tico**: Valida emociones sin minimizar ni dramatizar
- **Claro**: Mensajes cortos y fÃ¡ciles de leer en WhatsApp
- **Respetuoso**: Trata a cada mujer como adulta capaz
- **CÃ¡lido**: Como una amiga informada, no como un robot

---

## Ejemplos de ConversaciÃ³n

### Check-in matutino
```
Pausiva: Buenos dÃ­as. Â¿CÃ³mo amaneciste hoy? Â¿CÃ³mo dormiste anoche?

Usuaria: Mal, me despertÃ© como 5 veces con bochornos

Pausiva: Lamento escuchar eso. Las interrupciones de sueÃ±o por bochornos 
pueden ser muy agotadoras. Â¿CÃ³mo te sientes de energÃ­a esta maÃ±ana?
He registrado esto en tu seguimiento.

Â¿Hay algo mÃ¡s en lo que pueda ayudarte hoy?
```

### Registro de sÃ­ntomas
```
Usuaria: Hoy me siento muy cansada y con dolor de cabeza

Pausiva: Gracias por contarme. El cansancio y el dolor de cabeza pueden 
ser comunes en esta etapa, pero es importante observar cÃ³mo evolucionan.

He registrado estos sÃ­ntomas. Si el dolor de cabeza persiste o se 
intensifica, te recomiendo comentarlo con tu mÃ©dica.

Â¿Has podido descansar un poco hoy?
```

### MedicaciÃ³n
```
Usuaria: Me recetaron tomar estrÃ³genos 1mg cada maÃ±ana por 3 meses

Pausiva: He registrado tu medicaciÃ³n:
- EstrÃ³genos 1mg
- Frecuencia: cada maÃ±ana
- DuraciÃ³n: 3 meses

Te enviarÃ© un recordatorio diario. Â¿A quÃ© hora prefieres que te recuerde?

Recuerda: si tienes dudas sobre tu medicamento, es mejor consultarlo 
con tu mÃ©dica o farmacÃ©utica.
```

### DetecciÃ³n de riesgo alto
```
Usuaria: Tengo un dolor muy fuerte en el pecho y me cuesta respirar

Pausiva: Lo que me describes suena muy preocupante y es importante 
que busques ayuda mÃ©dica de inmediato.

Por favor, acude a un servicio de urgencias lo antes posible.

Si estÃ¡s en Chile, puedes llamar a:
- SAMU: 131
- Salud Responde: 600 360 7777

Â¿Hay alguien que pueda acompaÃ±arte?
```

### Recordatorio de cita
```
Pausiva: Hola, te recuerdo que maÃ±ana tienes cita:

ðŸ“… Viernes 15 de diciembre, 10:00
ðŸ¥ Dra. MarÃ­a LÃ³pez - GinecologÃ­a
ðŸ“ Centro MÃ©dico Las Condes

Â¿Confirmas que asistirÃ¡s? Â¿Necesitas ayuda preparando preguntas 
para tu consulta?
```

---

## Flujo Conversacional

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    FLUJO DE CONVERSACIÃ“N                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                   â”‚
â”‚  â”‚ Nuevo mensajeâ”‚                                                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                                   â”‚
â”‚         â”‚                                                           â”‚
â”‚         â–¼                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    SÃ­    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚  â”‚ Â¿Paciente    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ Bienvenida          â”‚                 â”‚
â”‚  â”‚ nueva?       â”‚          â”‚ personalizada       â”‚                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚         â”‚ No                         â”‚                              â”‚
â”‚         â–¼                            â”‚                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚                              â”‚
â”‚  â”‚ Clasificar   â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â”‚
â”‚  â”‚ mensaje      â”‚                                                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                                   â”‚
â”‚         â”‚                                                           â”‚
â”‚    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
â”‚    â–¼         â–¼         â–¼          â–¼          â–¼                     â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚ â”‚Triageâ”‚ â”‚Medica-â”‚ â”‚Appoint-â”‚ â”‚Check- â”‚ â”‚General â”‚                â”‚
â”‚ â”‚      â”‚ â”‚ciÃ³n   â”‚ â”‚ments   â”‚ â”‚in     â”‚ â”‚        â”‚                â”‚
â”‚ â””â”€â”€â”¬â”€â”€â”€â”˜ â””â”€â”€â”€â”¬â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”˜ â””â”€â”€â”€â”¬â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”˜                â”‚
â”‚    â”‚         â”‚          â”‚         â”‚          â”‚                     â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚
â”‚                         â”‚                                           â”‚
â”‚                         â–¼                                           â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                               â”‚
â”‚              â”‚ Respuesta empÃ¡tica  â”‚                               â”‚
â”‚              â”‚ + Registro sÃ­ntomas â”‚                               â”‚
â”‚              â”‚ + Pregunta seguim.  â”‚                               â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                               â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Estado de ConversaciÃ³n

El sistema mantiene el contexto de la conversaciÃ³n para:

- **Continuar temas activos**: Si preguntÃ³ sobre medicaciÃ³n, las siguientes respuestas se interpretan en ese contexto
- **Hacer seguimiento**: Si reportÃ³ un sÃ­ntoma, puede preguntar cÃ³mo evolucionÃ³
- **Transiciones suaves**: Cambiar de tema sin perder el hilo

---

## Arquitectura TÃ©cnica

### Sistema Multi-Agente

```
                    Mensaje de WhatsApp
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ORCHESTRATOR                                    â”‚
â”‚  - Recibe todos los mensajes                                        â”‚
â”‚  - Mantiene estado de conversaciÃ³n                                  â”‚
â”‚  - Clasifica intenciÃ³n del mensaje                                  â”‚
â”‚  - Detecta riesgo rÃ¡pido                                            â”‚
â”‚  - Rutea al agente especializado                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚                â”‚                â”‚
          â–¼                â–¼                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  TRIAGE AGENT   â”‚ â”‚ MEDICATION  â”‚ â”‚  APPOINTMENTS   â”‚
â”‚                 â”‚ â”‚   AGENT     â”‚ â”‚     AGENT       â”‚
â”‚ - EvalÃºa riesgo â”‚ â”‚             â”‚ â”‚                 â”‚
â”‚ - Clasifica     â”‚ â”‚ - Extrae    â”‚ â”‚ - Registra      â”‚
â”‚   sÃ­ntomas      â”‚ â”‚   recetas   â”‚ â”‚   citas         â”‚
â”‚ - Alerta        â”‚ â”‚ - Programa  â”‚ â”‚ - EnvÃ­a         â”‚
â”‚   urgencias     â”‚ â”‚   recordat. â”‚ â”‚   recordatorios â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                â”‚                â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    CHECKIN AGENT                                     â”‚
â”‚  - Seguimiento diario                                               â”‚
â”‚  - Preguntas de bienestar                                           â”‚
â”‚  - Registro de estado emocional                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    MEMORY / STORAGE                                  â”‚
â”‚  - Historial de conversaciÃ³n                                        â”‚
â”‚  - Perfil de paciente                                               â”‚
â”‚  - SÃ­ntomas registrados                                             â”‚
â”‚  - MedicaciÃ³n activa                                                â”‚
â”‚  - Citas programadas                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Agentes Especializados

| Agente | Responsabilidad | Se activa cuando |
|--------|-----------------|------------------|
| **Orchestrator** | Coordina todo, routing inteligente | Siempre (punto de entrada) |
| **TriageAgent** | EvalÃºa riesgo, detecta urgencias | Menciona sÃ­ntomas, malestar, dolor |
| **MedicationAgent** | Extrae y gestiona recordatorios | Menciona recetas, pastillas, tratamiento |
| **AppointmentsAgent** | Gestiona citas mÃ©dicas | Menciona citas, consultas, doctores |
| **CheckinAgent** | Seguimiento diario, bienestar | Responde sobre su estado, check-ins |
| **GeneralAgent** | ConversaciÃ³n general | Saludos, preguntas informativas |

---

## ClasificaciÃ³n de Riesgo

| Nivel | Score | Ejemplos | AcciÃ³n |
|-------|-------|----------|--------|
| `high` | 80-100 | Dolor de pecho, dificultad respirar, sangrado abundante, ideaciÃ³n suicida | Urgencia inmediata + Alerta |
| `medium` | 40-79 | SÃ­ntomas persistentes, empeoramiento, efectos secundarios | Recomendar consulta pronto |
| `low` | 10-39 | Cansancio, bochornos, molestias leves | Seguimiento normal |
| `none` | 0-9 | Consultas informativas, saludos | ConversaciÃ³n normal |

### SÃ­ntomas de Alto Riesgo (detecciÃ³n automÃ¡tica)

- Dolor en el pecho
- Dificultad para respirar
- Sangrado abundante inesperado
- Ideas de hacerse daÃ±o
- Dolor sÃºbito e intenso
- AlteraciÃ³n de conciencia
- Desmayos

---

## Estructura del Monorepo

```
pausiva-core/
â”œâ”€â”€ backend/                        # Backend Python
â”‚   â”œâ”€â”€ packages/
â”‚   â”‚   â”œâ”€â”€ agent/                  # Paquete del agente de IA
â”‚   â”‚   â”‚   â””â”€â”€ pausiva_agent/
â”‚   â”‚   â”‚       â”œâ”€â”€ agents/         # Agentes especializados
â”‚   â”‚   â”‚       â”œâ”€â”€ database/       # IntegraciÃ³n Supabase
â”‚   â”‚   â”‚       â”œâ”€â”€ models/         # Modelos de datos
â”‚   â”‚   â”‚       â””â”€â”€ memory/         # Sistema de memoria
â”‚   â”‚   â””â”€â”€ whatsapp/               # IntegraciÃ³n con WhatsApp
â”‚   â”‚
â”‚   â”œâ”€â”€ services/api/               # Servidor HTTP REST
â”‚   â”œâ”€â”€ scripts/                    # Scripts de testing
â”‚   â””â”€â”€ docs/                       # OpenAPI/Swagger
â”‚
â”œâ”€â”€ front/                          # Dashboard Next.js
â”œâ”€â”€ wa-agent-gateway/               # Gateway WhatsApp (Node.js)
â”œâ”€â”€ data/                           # Datos locales (gitignored)
â”œâ”€â”€ .env                            # Variables de entorno
â””â”€â”€ requirements.txt                # Dependencias Python
```

---

## InstalaciÃ³n RÃ¡pida

```bash
# 1. Clonar
git clone https://github.com/tu-org/pausiva-core.git
cd pausiva-core

# 2. Entorno virtual
python3 -m venv env
source env/bin/activate

# 3. Dependencias
pip install -r requirements.txt
cd backend/packages/agent && pip install -e . && cd ../../..

# 4. Configurar API Key
echo "GOOGLE_API_KEY=tu_api_key" > .env

# 5. Probar
python backend/scripts/test_api.py -p "+56912345678" -m "Hola"
```

---

## API REST

### Endpoints

| MÃ©todo | Endpoint | DescripciÃ³n |
|--------|----------|-------------|
| `POST` | `/message` | Procesar mensaje de paciente |
| `POST` | `/checkin` | Generar check-in proactivo |
| `GET` | `/context/{phone}` | Obtener contexto de paciente |
| `DELETE` | `/patient/{phone}` | Eliminar datos (testing) |
| `GET` | `/storage/status` | Estado del almacenamiento |
| `GET` | `/docs` | Swagger UI |

### Ejemplo: Enviar mensaje

```bash
curl -X POST http://localhost:8080/message \
  -H "Content-Type: application/json" \
  -d '{"phone": "+56912345678", "message": "Me siento muy cansada hoy"}'
```

**Respuesta:**
```json
{
  "reply_text": "Lamento escuchar que te sientes cansada. El cansancio puede ser comÃºn en esta etapa, pero es importante escuchar a tu cuerpo. Â¿Has podido descansar? Â¿CÃ³mo dormiste anoche?",
  "actions": ["SEND_MESSAGE", "UPDATE_SYMPTOM_TRACKING"],
  "risk_level": "low",
  "risk_score": 20,
  "symptom_summary": "Cansancio reportado",
  "follow_up_questions": ["Â¿CÃ³mo dormiste anoche?"],
  "agent_used": "checkin"
}
```

### Iniciar servidor

```bash
python backend/services/api/server.py

# DocumentaciÃ³n: http://localhost:8080/docs
```

---

## IntegraciÃ³n con WhatsApp

```python
from pausiva_agent import PausivaOrchestrator

pausiva = PausivaOrchestrator(storage_path="data")

def handle_whatsapp_message(phone: str, message: str):
    response = pausiva.process_message(phone, message)
    
    # Enviar respuesta
    send_whatsapp_message(phone, response.reply_text)
    
    # Manejar acciones especiales
    if "OPEN_RISK_ALERT" in response.actions:
        notify_emergency_contact(phone, response)
        notify_staff_dashboard(phone, response)
    
    if "SCHEDULE_MED_REMINDERS" in response.actions:
        schedule_medication_cron(phone, response.medication_schedule)
    
    return response.to_dict()
```

---

## Variables de Entorno

| Variable | DescripciÃ³n | Requerida |
|----------|-------------|-----------|
| `GOOGLE_API_KEY` | API Key de Google AI Studio | SÃ­ |
| `SUPABASE_URL` | URL del proyecto Supabase | No* |
| `SUPABASE_SERVICE_KEY` | Service Role Key | No* |

*Supabase es opcional. Sin configurar, usa JSON local.

---

## Almacenamiento

### Desarrollo (JSON local)
```
data/
â”œâ”€â”€ patients/56912345678.json
â”œâ”€â”€ conversations/56912345678.json
â”œâ”€â”€ medications/56912345678.json
â”œâ”€â”€ appointments/56912345678.json
â””â”€â”€ symptoms/56912345678.json
```

### ProducciÃ³n (Supabase)
- `patients` - Perfiles con `clinical_profile_json`
- `appointments` - Citas mÃ©dicas
- `followings` - Interacciones y sÃ­ntomas
- `patient_timeline_events` - Historial de eventos

---

## Limitaciones

- No reemplaza atenciÃ³n mÃ©dica profesional
- No diagnostica ni prescribe medicaciÃ³n
- Requiere conexiÃ³n a internet
- Orientado a mujeres de 40-60 aÃ±os en etapa de menopausia

---

## Licencia

MIT License

---

## Contacto

Para dudas o contribuciones, crear un issue en el repositorio.
